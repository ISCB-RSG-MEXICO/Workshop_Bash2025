# Mis primeros pasos en R

## Introducci√≥n al script de R

Antes de empezar a escribir y ejecutar instrucciones en R, es importante conocer el **script**, que es donde realmente vamos a trabajar.

Un **script** es un archivo de texto donde puedes escribir tus instrucciones de R para ejecutarlas despu√©s, en lugar de escribirlas directamente en la consola. Usar un script tiene varias ventajas: puedes **guardar tu trabajo**, **corregirlo f√°cilmente** y **ejecutar varias instrucciones de manera ordenada**.

#### Ubicaci√≥n y manejo de scripts en RStudio

-   El script se abre en el **panel superior izquierdo** de RStudio por defecto.

-   Puedes tener **varios scripts abiertos a la vez**, cada uno en su propia pesta√±a. Esto te permite trabajar en diferentes proyectos o partes de un proyecto sin perder nada.

-   Para cambiar de script, simplemente haz clic en la pesta√±a correspondiente.

#### C√≥mo usar un script en RStudio

1.  **Crear un script nuevo:**\
    Ve a `File ‚Üí New File ‚Üí R Script` o presiona `Ctrl + Shift + N` (Windows/Linux) o `‚åò + Shift + N` (Mac).

2.  **Escribir c√≥digo:**\
    En el script puedes escribir cualquier instrucci√≥n de R, desde operaciones matem√°ticas hasta funciones complejas.

    ![](figures/Sript_R.png)

::: callout-caution
No olvides **guardar tu script y los cambios** que realices con frecuencia, para no perder nada. Para guardar, usa `Ctrl + S` (Windows/Linux) o `‚åò + S` (Mac), o ve a `File ‚Üí Save`.
:::

## Ejecutar c√≥digo

Puedes ejecutar el c√≥digo de varias formas:

-   **Correr una l√≠nea de c√≥digo:** selecciona la l√≠nea o col√≥cate al final de ella y presiona **`Ctrl + Enter`** (Windows/Linux) o **`‚åò + Enter`** (Mac).\
    Esto enviar√° el c√≥digo seleccionado a la consola para su ejecuci√≥n.

-   **Usar el bot√≥n *Run*:** tambi√©n puedes ejecutar el c√≥digo haciendo clic en el bot√≥n **`Run`**, ubicado en la parte superior derecha del panel de scripts.

Si no hay texto seleccionado al ejecutar `Ctrl + Enter /‚åò + Enter` **o** *`Run`, R* ejecutar√° la l√≠nea donde est√° el cursor; si hay texto seleccionado, ejecutar√° solo esa parte.

## Usar R como calculadora

Una de las formas m√°s sencillas de comenzar a usar `R` es como una **calculadora interactiva**.

La consola de R puede evaluar expresiones matem√°ticas y mostrar los resultados de inmediato.

Por ejemplo, escribe lo siguiente en la consola y presiona **Enter**:

```{r}
 3+500
```

R responder√° con:

El n√∫mero entre corchetes `[1]` indica el √≠ndice del primer elemento mostrado.

Esto es √∫til cuando trabajamos con vectores, ya que R puede manejar m√∫ltiples valores al mismo tiempo.

### Operaciones b√°sicas

Puedes realizar diferentes operaciones aritm√©ticas:

```{r}
3 + 5 # suma 
7 - 2 # resta 
4 * 6 # multiplicaci√≥n 
9 / 3 # divisi√≥n 
2^3 # potencia (2 elevado a la 3)
```

Cuando realices operaciones m√°s complejas en R, el **orden de operaciones** sigue las mismas reglas matem√°ticas de siempre:

De mayor a menor precedencia:

-   Par√©ntesis: `(`, `)`

-   Exponentes: `^` o `**`

-   Multiplicaci√≥n: `*`

-   Divisi√≥n: `/`

-   Suma: `+`

-   Resta: `-`

```{r}
4+2 * 3
```

Usa par√©ntesis para agrupar operaciones y forzar el orden de evaluaci√≥n si difiere del predeterminado, o para aclarar tus intenciones:

```{r}
# Sin par√©ntesis: se sigue el orden de operaciones
 2 + 3 * 4   

# Con par√©ntesis: cambiamos el orden de evaluaci√≥n
(2 + 3) * 4 
```

### Notaci√≥n cient√≠fica

N√∫meros muy peque√±os o muy grandes se muestran en notaci√≥n cient√≠fica:

```{r}
7/10000
```

Esto es una abreviaci√≥n de "multiplicado por `10^XX`". Por ejemplo, `7e-4` es equivalente a `7 * 10^(-4)`.

Tambi√©n puedes escribir n√∫meros directamente en notaci√≥n cient√≠fica:

```{r}
5e3 # Nota que no hay signo menos
```

::: callout-caution
## Comandos incompletos

Si escribes una instrucci√≥n incompleta, R esperar√° que la termines.\
Por ejemplo:

`3+`

Ver√°s que el s√≠mbolo de la consola cambia de `>` a `+`.\
Esto indica que R est√° esperando que completes el comando.\
Si deseas cancelar, presiona **Esc** (o **Ctrl + C**).
:::

## Funciones en R

En R, una **funci√≥n** es un comando que realiza una tarea espec√≠fica. Para usarla, escribe su nombre seguido de par√©ntesis `()`. Para usar una funci√≥n, escribe su nombre seguido de par√©ntesis de apertura y cierre. Las funciones toman argumentos como entrada, todo lo que escribas dentro de los par√©ntesis se considera un argumento. Dependiendo de la funci√≥n, el n√∫mero de argumentos puede variar desde ninguno hasta varios.

::: callout-important
## Importante

Algunas funciones necesitan **argumentos**; otras no.
:::

Vamos a ver algunos ejemplos:

### Funciones matem√°ticas

-   Suma de n√∫meros

```{r}
sum(1,2,3,4,5)
```

-   Valor absoluto

```{r}
abs(-7)
```

```{r}

```

-   Logaritmo natural

```{r}
log(1)
```

-   Logaritmo en base 10

```{r}
log10(10)
```

-   Exponencial de un n√∫mero, es decir: $e^x$.

```{r}
exp(0.5)  # Calcula e^(0.5)
```

-   Redondear un n√∫mero

```{r}
round(3.14159, 2)
```

**Argumentos:**

1.  `3.14159`‚Üí **El n√∫mero que quieres redondear** (puede ser un solo n√∫mero o un vector de n√∫meros).

2.  `2`‚Üí **Cantidad de decimales a mantener** despu√©s del punto. Este argumento es opcional; si no lo pones, R redondea al entero m√°s cercano.

-   Repetir valores

```{r}
rep(7,9)
```

Utilizar los argumentos de manera similar a funci√≥n `round()`.

**Argumentos:**

1.  `7`‚Üí **El n√∫mero que quieres repetir** (puede ser un solo n√∫mero o un vector de n√∫meros).

2.  9 ‚Üí **Cantidad de veces** que quieres que se reprita el n√∫mero.

### Funciones √∫tiles y de exploraci√≥n

-   Ruta absoluta del directorio de trabajo

```{r}
getwd()  
```

-   Fecha y hora actual

```{r}
date()
```

-   Acceder a la ventana de ayuda de R

```{r}
help()
```

::: callout-note
## Notas r√°pidas:

-   Todo lo que va dentro de `()` son **argumentos** que la funci√≥n necesita.

-   Algunas funciones pueden recibir **vectores** (listas de n√∫meros) como entrada ( `rep()`, `round ()`).

-   Otras funciones no necesitan argumentos (`date()`).

```{=html}
<!-- -->
```
-   Prueba cada funci√≥n directamente en la consola de R para ver los resultados de inmediato.
:::

R cuenta con una cantidad enorme de funciones, muchas de las cuales pueden tener argumentos m√°s complejos y usos avanzados. Lo que hemos visto hasta ahora es solo una peque√±a muestra; a lo largo del curso exploraremos m√°s funciones y aprenderemos a utilizarlas de manera pr√°ctica.

::: callout-important
No te preocupes si no recuerdas alguna de ellas. Siempre puedes consultar para qu√© sirve una funci√≥n de las siguientes maneras:

```{r}
?mean
help(mean)
```
:::

## Variables y objetos en R

### Variables

En el mundo de la programaci√≥n, las **variables** son elementos esenciales para almacenar y manejar informaci√≥n. En R, una variable funciona como una **etiqueta** que nos permite referirnos a un dato y guardarlo en un espacio de memoria. Para asignar un valor a una variable usamos el operador `<-`, que nos permite darle un nombre a ese dato para utilizarlo m√°s adelante, as√≠:

```{r}
x <- 10 * 50
```

Esto significa:

-   **x** es el nombre de la *variable*.

-   `<-` significa "asignar".

-   **10** es el valor del objeto que guardas dentro de la *variable*.

Observa que al asignar un valor **R no imprime el resultado**.\

En su lugar, lo guarda para usarlo despu√©s en la *variable*. Para conocer el valor de la variable puedes hacerlo solo poniendo el nombre de la variable y correrlo o utilizar la funci√≥n `print()` con el nombre de la variable adentro. As√≠:\

```{r}
x # solo el nombre de la variable
print(x) # con la funcion print
```

Ahora, podr√°s ver que en la pesta√±a de **Environment** (panel superior derecho), la variable `x` y su valor han aparecido.

Tambi√©n es posible asignar utilizando `=`:

```{r}
y = 10 * 50

y
```

Sin embargo, en la comunidad de R es **mucho menos com√∫n**.\

La recomendaci√≥n general es usar **`<-`**, ya que es m√°s claro en la mayor√≠a de contextos. Adem√°s, de que puede haber mayor confusi√≥n en c√≥digos m√°s complejos.

#### Nombres v√°lidos para variables

Para asignar un objeto a una variable, debemos usar nombres v√°lidos:

-   **Puede contener:** letras, n√∫meros, puntos (`.`), guiones bajos (`_`)

-   **Debe comenzar con:** letra o punto seguido de letra.

-   **No puede comenzar con:** n√∫mero, guion bajo, punto seguido de n√∫mero.

-   **No puede contener:** espacios ni guiones (`-`).

-   R distingue may√∫sculas y min√∫sculas (`Edad` ‚â† `edad`).

Ejemplos v√°lidos:

`min_height`

`max.height`

`celsius2kelvin`

`temperatura_media`

Ejemplos inv√°lidos:

`_edad`

`2widths`

`min-length`

`mi variable`

### Objetos

En R, todo lo que guardamos dentro de una variable es un objeto.\
Si la variable es la *etiqueta*, el objeto es el *contenido* que esa etiqueta se√±ala.

Existen varios tipos de objetos en R, cada uno con caracter√≠sticas distintas:

#### 1. N√∫meros

Son objetos que representan valores num√©ricos. Pueden ser enteros o decimales.\
Ejemplo:

```{r}
3
```

#### 2. Texto o caracteres

Representan cadenas de texto. Se escriben entre comillas dobles `" "` o simples `' '`.\
Ejemplo:

```{r}
"Hola, ¬øc√≥mo est√°n?"
```

#### 3. Vectores

Son **listas de n√∫meros o texto**. Todos los elementos deben ser del mismo tipo (num√©rico, car√°cter o l√≥gico).\
Se pueden crear con `c()` o usando secuencias como `1:5`.\
Ejemplo:

```{r}
c(1,2,3,4,5,6,7,8,9,10)
1:27
```

#### 4. Matrices

Son **tablas con filas y columnas**, todos los elementos del mismo tipo.\
Se crean con la funci√≥n `matrix()`.\
Ejemplo:

```{r}
matrix(1:6, nrow=2)
```

#### 5. Listas

Son objetos que pueden **almacenar diferentes tipos de datos** en un solo objeto (n√∫meros, texto, vectores, etc.).\
Se crean con `list()`.\
Ejemplo:

```{r}
list(nombre="Stanford", edad=39)
```

#### 6. Data frames

Un **data frame** es como una **tabla** de Excel: tiene filas y columnas. Cada columna puede tener **diferentes tipos de datos** (n√∫meros, texto, etc.).\
Se crean con `data.frame()`.\
Ejemplo:

```{r}
data.frame(Tipo=c("Flores","Mariposas", "Lib√©lulas"), Cantidad=c(40,25,10))
```

#### 7. Factores

Se usan para **representar datos categ√≥ricos**, como sexo, nacionalidades o colores, etc.\
Crean internamente un conjunto de niveles posibles.\
Ejemplo:

```{r}
factor(c("mexicana", "italiana", "canadiense", "mexicana", "canadiense", "holandesa"))
```

#### Valores especiales en R (NA, NULL, NaN, Inf)

Adem√°s de n√∫meros, textos, vectores y otros objetos, R tambi√©n tiene **valores especiales** que aparecen cuando falta informaci√≥n o cuando ocurre algo fuera de lo com√∫n.

**NA**\
Significa *Not Available* (dato no disponible).\
Aparece cuando falta un dato.

```{r}
x <- c(1, NA, 3) 
x
```

**NULL**\
Representa *ausencia total de un valor* o "vac√≠o".\
Es diferente de NA porque **NULL es nada**, no ocupa lugar.

```{r}
y <- NULL
y
```

### Relaci√≥n entre variables y objetos

Recuerda que **todos los objetos que vimos**: n√∫meros, textos o caracteres, vectores, matrices, listas, data frames y factores **pueden guardarse en una variable**.

Al guardar un objeto en una variable, le damos un **nombre** que nos permite **utilizarlo m√°s adelante**, modificarlo o combinarlo con otros objetos seg√∫n lo necesitemos.

::: callout-note
## Ejercicio 1

Guardar objetos en variables:

1.  Crea un data frame con la informaci√≥n del ejemplo y gu√°rdalo en una variable llamada `mi_tabla`:

::: {.callout-tip collapse="true"}
## Soluci√≥n

```{r}
mi_tabla <- data.frame(Tipo=c("Flores","Mariposas", "Lib√©lulas"), Cantidad=c(40,25,10))
```

Ahora `mi_tabla` contiene la tabla completa. Puedes ver su contenido escribiendo:

```{r}
mi_tabla
```
:::
:::

::: callout-note
2.  Crea un factor con la informaci√≥n del ejemplo y gu√°rdalo en una variable llamada `colores`:

::: {.callout-tip collapse="true"}
## Soluci√≥n

```{r}
nacionalidad <- factor(c("mexicana", "italiana", "canadiense", "mexicana", "canadiense", "holandesa"))
```

Ahora `nacionalidad`contiene los niveles: mexicana, italiana, canadiense y holandesa

```{r}
nacionalidad
```
:::
:::

## Tips en R

### Conocer tu ruta de trabajo

La funci√≥n `getwd()` te devuelve la ruta absoluta del directorio de trabajo

```{r}
getwd() 

```

### Comentarios en R

Puedes agregar comentarios en tu c√≥digo para explicar qu√© hace.\
Todo lo que est√© despu√©s del s√≠mbolo `#` no se ejecutar√°:

```{r}
3 + 3 # Esto es un comentario
```

### Limpiar tu entorno en R

Puedes limpiar tu espacio de trabajo (eliminar todos los objetos guardados) con:

```{r}
rm(list = ls())
```

Puedes **limpiar la consola** para empezar de nuevo haciendo clic en el √≠cono con forma de **escoba** üßπ, ubicado en la esquina superior derecha de la consola, o utilizando el atajo de teclado `Ctrl + L`(Windows/Linux) o `‚åò + L` (Mac).

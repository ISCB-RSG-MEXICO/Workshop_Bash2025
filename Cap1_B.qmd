# Mis primeros pasos en Bash

## **Entorno de Bash**

![](img/entornoBash.png)

El signo `$` es un **prompt**, que nos muestra que la terminal está esperando una entrada; tu terminal puede usar un carácter diferente como prompt y puede agregar información antes de él. Al teclear comandos, ya sea a partir de estas lecciones o de otras fuentes, no escribas el prompt (*\$*), sólo los comandos que le siguen.

## **Estructura de un comando**

Cada comando en Bash sigue una estructura general formada por tres partes principales:

``` {.bash code-copy="true" eval="false"}
comando [opciones] [argumentos]
```

-   **comando**: la acción que Bash ejecutará (por ejemplo, `ls`, `cp`, `grep`)

-   **opciones**: modificadores que cambian el comportamiento del comando; suelen comenzar con `-` o `--` .

-   **argumentos**: los objetos sobre los que el comando actuará (archivos, carpetas, patrones, etc.)

Por ejemplo:

`ls -l /home/usuario/`

-   `ls` → lista el contenido de un directorio

-   `-l` → opción que muestra la lista en formato largo

-   `/home/usuario/` → argumento que indica el directorio a listar

Otro ejemplo:

``` {.bash code-copy="true" eval="false"}
grep -i "gene" genes.gft
```

-   grep → busca texto dentro de los archivos

-   -i → opción que ignora mayúsculas y minúsculas

-   "gene" → patrón a buscar

-   genes.gft → archivo donde se buscará

::: callout-note
**NOTA**: Algunos comandos permiten combinar varias opciones

Por ejemplo:

`ls -lah`

Aquí `-l`, `-a` y `-h` se aplican simultáneamente:

-   `-l` → formato largo

-   `-a` → muestra los archivos ocultos

-   `-h` → tamaños legibles para humanos (por ejemplo, "5K" en lugar de "5120")
:::

## Navegación y organización del entorno de trabajo

-   Ruta / Camino absoluto: especifica la ubicación completa desde el directorio raíz `/`.

    ``` {.bash code-copy="true" eval="false"}
    cd /home/usuario/data/
    ```

-   Ruta / Camino relativo: indica la ubicación en relación con el directorio actual.

    ``` {.bash code-copy="true" eval="false"}
    cd ../ # Ir a la carpeta anterior
    ```

::: callout-note
**NOTA 1:** Si utilizas `cd` y no indicas una ruta absoluta, te llevara al directorio raíz (`~`).

**NOTA 2:** Puedes usar la tecla **TAB** para completar el nombre de carpetas o archivos. Si hay varias carpetas con el mismo inicio, presiona **TAB** dos veces para ver las coincidencias.
:::

## Conocer mi dirección / ubicación

El comando `pwd` (que significa "imprime directorio de trabajo" -- **p**rint **w**orking **d**irectory) muestra el **directorio actual**, es decir, la ubicación en la que te encuentras dentro del sistema de archivos. Por defecto, los comandos que ejecutes actúan sobre este directorio, a menos que especifiques otra ruta.

``` {.bash code-copy="true" eval="false"}
pwd # /c/Users/emilio
```

En la computadora de Emilio, el sistema de archivos se ve así:

[![](https://swcarpentry.github.io/shell-novice-es/fig/filesystem.svg){fig-align="center"}](https://swcarpentry.github.io/shell-novice-es/02-filedir.html)

En la parte superior se encuentra el **directorio raíz** (`/`), que contiene todo lo demás.

Dentro de él se ubican otros directorios comúnes:

-   `bin`: programas del sistema
-   `data`: archivos de datos
-   `Users`: directorios personales de los usuarios
-   `tmp`: archivos temporales

::: callout-note
## Ejercicio 1

A partir de `/Users/emilio/data/`, ¿Cuál de los siguientes comandos lleva al directorio de inicio, que es `/Users/emilio`?

1.  `cd .`

2.  `cd /`

3.  `cd /home/amanda`

4.  `cd ../..`

5.  `cd ~`

6.  `cd home`

7.  `cd ~/data/..`

8.  `cd`

9.  `cd ..`

    ::: {.callout-tip collapse="true" icon="false"}
    ## Solución

    1.  No: `.` indicael directorio actual.

    2.  No: `/` es el directorio raíz.

    3.  No: El directorio **home** es `/Users/emilio`.

    4.  No: sube dos niveles, quedando en `/Users`.

    5.  Sí: `~` representa el directorio **home** del usuario, en este caso `/Users/amanda`.

    6.  No: buscaría un directorio `home` dentro del actual (si existiera).

    7.  Sí: sube un sivel desde `~/data` .

    8.  Sí: `cd` sin argumentos te lleva al **home**

    9.  Sí: sube un nivel desde el directorio actual.
    :::
:::

Ejemplo de rutas:

[![](https://github.com/raynamharris/Shell_Intro_for_Transcriptomics/raw/master/lessons/figures/nav_dirs.png)](https://github.com/raynamharris/Shell_Intro_for_Transcriptomics/blob/master/lessons/02_Navigating_Dirs.md)

## Explorar y obtener información

Comandos para mirar que hay, dónde estás y conocer detalles de los archivos o del sistema

| Comandos  | Información                                            | Ejemplo de uso       |
|----------------|---------------------------------------|----------------|
| `pwd`     | Muestra el directorio actual                           | `pwd`                |
| `history` | Muestra el historial de comandos                       | `history`            |
| `ls`      | Observar el contenido de los archivos en un directorio | `ls mi_directorio`   |
| `which`   | Muestra la ruta del ejecutable de un comando           | `which python`       |
| `file`    | Moverse de directorios                                 | `file documento.txt` |
| `whomai`  | Muestra el usuario actual                              | `whomai`             |
| `which`   | Muestra la ubicación del ejecutable de un comando      | `which python`       |

## Moverse en el sistema de archivos

Comandos para navegar entre directoriosy rutas

| Comando | Descripción                               | Ejemplo           |
|---------|-------------------------------------------|-------------------|
| `cd`    | Cambia de directorio                      | `cd ~/Documentos` |
| `cd ..` | Sube un nivel en la jerarquía de carpetas | `cd ..`           |
| `cd ~`  | Va al directorio personal del usuario     | `cd ~`            |
| `cd -`  | Vuelve al directorio anterior             | `cd -`            |

## Crear, copiar, mover y eliminar

Comandos que modifican la estructura de directorios y archivos

| Comando | Descripción                  | Ejemplo                    |
|---------|------------------------------|----------------------------|
| `mkdir` | Crea un nuevo directorio     | `mkdir resultados`         |
| `touch` | Crea un archivo vacío        | `touch notas.txt`          |
| `cp`    | Copia archivos o directorios | `cp archivo.txt copia.txt` |
| `mv`    | Mueve o renombra archivos    | `mv datos.csv carpeta/`    |
| `rm`    | Elimina archivos             | `rm archivo.txt`           |
| `rmdir` | Elimina directorios vacíos   | `rmdir vieja/`             |

## Ver y examinar contenido

Comandos para inspeccionar lo que hay dentro de los archivos sin abrirlos en un editor

| Comando | Descripción                   | Ejemplo                   |
|---------|-------------------------------|---------------------------|
| `cat`   | Muestra el contenido completo | `cat notas.txt`           |
| `head`  | Muestra las primeras líneas   | `head -n 10 datos.csv`    |
| `tail`  | Muestra las últimas líneas    | `tail -n 20 registro.log` |
| `less`  | Muestra el contenido paginado | `less texto.txt`          |

## Editar archivos desde la terminal

Estos editores permiten crear o modificar archivos directamente desde la terminal, especialmente útil al trabajar en servidores remotos o sin entorno gráfico.

| Comando | Descripción                                                                       | Ejemplo          |
|------------------|---------------------------|---------------------------|
| nano    | Editor sencillo y fácil de usar; guarda con Ctrl+O y cierra con Ctrl+X el archivo | `nano script.sh` |
| vim     | Editor avanzado con control mediante comandos; guarda con :w y sal con :q         | `vim script.sh`  |

## Buscar y filtrar

Comandos para localizar texto o patrones dentro de archivos o carpetas

| Comando | Descripción                          | Ejemplo                |
|---------|--------------------------------------|------------------------|
| grep    | Busca texto dentro de archivos       | `grep "error" log.txt` |
| find    | Busca archivos según criterios       | `find . -name "*.txt"` |
| `wc`    | Cuenta líneas, palabras o caracteres | `wc -l datos.txt`      |

## Permisos y propiedades

Comandos para ver o modificar quién puede leer, escribir o ejecutar archivos

| Comando | Descripción                     | Ejemplo                     |
|---------|---------------------------------|-----------------------------|
| `ls -l` | Muestra permisos y propietarios | `ls -l`                     |
| `chmod` | Cambia permisos de un archivo   | `chmod u+x script.sh`       |
| `chown` | Cambia propietario del archivo  | `chown usuario archivo.txt` |

## Compresión y empaquetado

Comandos para ahorrar espacio o mover varios archivos juntos

| Comando          | Descripción                      | Ejemplo                               |
|------------------|---------------------------|---------------------------|
| `gzip / gunzip`  | Comprime o descomprime archivos  | `gzip datos.txt`                      |
| `tar`            | Empaqueta y comprime directorios | `tar -czf proyecto.tar.gz carpeta/`   |
| `zip` / `unzip`  | Comprime o descomprime archivos  | `zip -r resultados.zip ./resultados/` |

## Transeferncia de archivos entre sistemas

| Comando   | Descripción                                                                               | Ejemplo                                                   |
|------------------|---------------------------|---------------------------|
| `ssh`     | Conecta de forma segura a otro sistema remoto                                             | `ssh usuario@servidor`                                    |
| scp       | Copia archivos entre equipos a través de SSH                                              | `scp archivo.txt usuario@servidor:/home/usuario/`         |
| `scp -r`  | Copia recursivamente directorios completos                                                | `scp -r datos/ usuario@servidor:/home/usuario/backup/`    |
| `rsync`   | Sincroniza directorios locales o remotas, copiando solo los archivos nuevos o modificados | `rsync -av datos/ usuario@servidor:/home/usuario/backup/` |

## Redirección y concatenación

Comandos para conectar procesos o guardar salidas

| Comando | Descripción                                            | Ejemplo                       |
|------------------|---------------------------|---------------------------|
| `>`     | Redirige la salida a un archivo                        | `ls > lista.txt`              |
| `>>`    | Agrega la salida al final del archivo existente        | `echo "nuevo" >> lista.txt`   |
| `<`     | Usa un archivo como entrada de un comando              | `sort < datos.txt`            |
| `|`     | Conecta la salida de un comando con la entrada de otro | `cat datos.txt | grep "gene"` |

## Información del sistema

Para conocer recursos o procesos en ejecución

| Comando    | Descripción                       | Ejemplo    |
|------------|-----------------------------------|------------|
| `df -h`    | Muestra espacio en el disco       | `df -h`    |
| `top`      | Muestra procesos activos          | `top`      |
| `uname -a` | Información del sistema operativo | `uname -a` |

## Comandos de ayuda

Para explorar y aprender sobre otros comandos

| Comando       | Descripción                     | Ejemplo             |
|---------------|---------------------------------|---------------------|
| `man`         | Muestra el manual de un comando | `man ls`            |
| `-h`/`--help` | Muestra ayuda rápida            | `ls -h`/`ls --help` |

## **Consultar información sobre archivos y directorios**

### **Información contenida**

Cada columna en la salida anterior tiene un significado:

[![](img/ejemplo_datos.png)](https://eveliacoss.github.io/RNAseq_classFEB2024/Presentaciones/Dia1_AspectosGenerales.html#74)

### **Permisos**

Cada usuario tiene permisos diferentes cuando crea un archivo. Los permisos pueden modificarse con `chmod`.

Los caracteres atribuidos a los permisos son:

-   `r` : escritura (Read)

-   `w` : lectura (Write)

-   `x` : ejecución (eXecute)

En el siguiente ejemplo, el usuario cuenta con todos los permisos activos, mientras que el grupo y otros tienen solo permisos de lectura y ejecución.

[![](img/permisos.png)](https://eveliacoss.github.io/RNAseq_classFEB2024/Presentaciones/Dia1_AspectosGenerales.html#75)

## **`chmod`: Cambiar permisos**

La representación octal de chmod es muy sencilla

-   `r` = Lectura tiene el valor de 4

-   `w` = Escritura tiene el valor de 2

-   `x` = Ejecución tiene el valor de 1

| Permisos | Valor | Significado                    |
|:--------:|:-----:|:-------------------------------|
|   rwx    |   7   | Lectura, escritura y ejecución |
|   rw-    |   6   | Lectura, escritura             |
|   r-x    |   5   | Lectura y ejecución            |
|   r\--   |   4   | Lectura                        |
|   -wx    |   3   | Escritura y ejecución          |
|   -w-    |   2   | Escritura                      |
|   \--x   |   1   | Ejecución                      |
|  \-\--   |   0   | Sin permisos                   |

Por lo tanto:

| Forma larga              | Forma Octal |
|:-------------------------|-------------|
| `chmod u=rwx,g=rwx,o=rx` | `chmod 775` |
| `chmod u=rwx,g=rx,o=`    | `chmod 760` |
| `chmod u=rw,g=r,o=r`     | `chmod 644` |
| `chmod u=rw,g=r,o=`      | `chmod 640` |
| `chmod u=rw,go=`         | `chmod 600` |
| `chmod u=rwx,go=`        | `chmod 700` |

## Comprimir y descomprimir archivos

Los archivos pueden contener diversos tipos de extensiones, dependiendo del objetivo será necesario descomprimirlos y en otros dejarlos comprimidos para no abarcar tanto espacio en tu espacio de trabajo. 

| Tipo de archivo | Comprimir                                                | Descomprimir               |
|-----------------|-------------------------------------|------------------|
| Carpeta.tar     | `tar -cvf carpeta.tar /dir/a/comprimir/carpeta`          | `tar -xvf carpeta.tar`     |
| Carpeta.tar.gz  | `tar -czvf carpeta.tar.gz /carpeta/a/empaquetar/carpeta` | `tar -zxvf carpeta.tar.gz` |
| Carpeta.gz      | `gzip -9 carpeta.gz carpeta/a/empaquetar/carpeta`        | `gunzip -kd carpeta.gz`    |
| Carpeta.zip     | `zip -r carpeta.zip carpeta`                             | `unzip carpeta.zip`        |

::: callout-note
## Ejercicio 2

1.  Descarga todo el repositorio comprimido [unix.bioinfo.rsgecuador](https://github.com/RSG-Ecuador/unix.bioinfo.rsgecuador/tree/gh-pages) en tu computadora. El archivo se almacenara con la extension (.ZIP).
2.  Colocate en la carpeta donde se encuentra el archivo. Ejemplo en mi computadora: `cd "C:/Users/ecoss/Documents/Respaldos/Github_notes/Workshop_Bash2024/data"`
3.  Descomprime el archivo ZIP. `unzip unix.bioinfo.rsgecuador-gh-pages.zip`
:::

## Material suplementario

-   Software Carpentry. [La terminal de Unix](https://swcarpentry.github.io/shell-novice-es/02-filedir.html)
-   RSG Ecuador.[GNU/Linux para bioinfomatica](https://rsg-ecuador.github.io/unix.bioinfo.rsgecuador/content/Curso_avanzado/02_Bash/1_bash.html)
-   [Introduction to the Unix Shell for Transcriptomics](https://github.com/raynamharris/Shell_Intro_for_Transcriptomics/tree/master)Tutorial.
